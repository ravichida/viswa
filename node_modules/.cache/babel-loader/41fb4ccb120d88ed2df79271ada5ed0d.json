{"ast":null,"code":"import _classCallCheck from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/ravi/projects/react/viswa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{BrowserRouter as Router,Switch,Route,Link}from\"react-router-dom\";import Firebase from'../node_modules/firebase';import config from'./config';import OrderDetails from'./orderdetails';import OrderDetailsList from'./orderdetailslist';import AddOrder from'./addorder';import Home from'./home';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.writeUserData=function(){Firebase.database().ref('/').set(_this.state);console.log('DATA SAVED');};_this.getUserData=function(){var ref=Firebase.database().ref('/');ref.on('value',function(snapshot){var state=snapshot.val();_this.setState(state);});console.log('DATA RETRIEVED');};_this.addData=function(user){// console.log(\"Add Data\");\nif(user){// console.log(user);\nvar users=_this.state.users;users.push(user);_this.setState({users:users});}};_this.removeData=function(user){if(user){var users=_this.state.users;var newState=users.filter(function(data){return data.uid!==user.uid;});if(users!==newState){_this.setState({users:newState});}console.log(\"Updated Users state\");}};_this.updateData=function(user){console.log(\"updateData fun in app.js\",user);if(user){console.log(\"if user in app.js\");var fname=user.fname;var lname=user.lname;var email=user.email;var phone=user.phone;var order=user.order;var orderno=user.orderno;var items=user.items;var price=user.price;var name=user.name;var total=user.total;var uid=user.uid;var condition=fname&&lname&&name&&email&&phone&&order&&orderno&&items&&price&&total;if(uid&&condition){console.log(\"Update condition met\");var users=_this.state.users;var devIndex=users.findIndex(function(user){return user.uid===uid;});console.log(\"devIndex\",devIndex);users[devIndex].fname=fname;users[devIndex].lname=lname;users[devIndex].name=name;users[devIndex].email=email;users[devIndex].phone=phone;users[devIndex].order=order;users[devIndex].orderno=orderno;users[devIndex].items=items;users[devIndex].price=price;users[devIndex].total=total;_this.setState({users:users});}console.log(\"Updateed State in app.js\",_this.state.users);}};Firebase.initializeApp(config);_this.state={users:[]};_this.addData=_this.addData.bind(_assertThisInitialized(_this));_this.updateData=_this.updateData.bind(_assertThisInitialized(_this));_this.removeData=_this.removeData.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(Router,{basename:process.env.PUBLIC_URL},React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-xl-12\"},React.createElement(\"h2\",null,\"Viswa Order Details\"))),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-xl-12\"},React.createElement(\"ul\",{className:\"nav nav-tabs\"},React.createElement(\"li\",{className:\"nav-item\"},React.createElement(Link,{to:\"/\",className:\"nav-link\"},\"Home\")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(Link,{to:\"/olist\",className:\"nav-link\"},\"Orders\")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(Link,{to:\"/od\",className:\"nav-link\"},\"Order Details\")),React.createElement(\"li\",{className:\"nav-item\"},React.createElement(Link,{to:\"/add\",className:\"nav-link\"},\"Add Order\"))))),React.createElement(\"div\",{className:\"row  my-2\"},React.createElement(\"div\",{className:\"col-xl-12\"},React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\",render:function render(props){return React.createElement(Home,{users:_this2.state.users,update:_this2.updateData,remove:_this2.removeData});}}),React.createElement(Route,{path:\"/olist\",render:function render(props){return React.createElement(OrderDetailsList,{users:_this2.state.users,update:_this2.updateData,remove:_this2.removeData});}}),React.createElement(Route,{path:\"/od\",render:function render(props){return React.createElement(OrderDetails,{users:_this2.state.users,update:_this2.updateData,remove:_this2.removeData});}}),React.createElement(Route,{path:\"/add\",render:function render(props){return React.createElement(AddOrder,{users:_this2.state.users,action:_this2.addData});}}))))));}},{key:\"componentDidMount\",value:function componentDidMount(){this.getUserData();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){console.log(\"prevProps\",prevProps);// check on previous state\n// only write when it's different with the new state\nconsole.log(\"componentDidUpdate\",prevState,this.state);if(prevState!==this.state){this.writeUserData();console.log(\"componentDidUpdate\");}}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/ravi/projects/react/viswa/src/App.js"],"names":["React","BrowserRouter","Router","Switch","Route","Link","Firebase","config","OrderDetails","OrderDetailsList","AddOrder","Home","App","props","writeUserData","database","ref","set","state","console","log","getUserData","on","snapshot","val","setState","addData","user","users","push","removeData","newState","filter","data","uid","updateData","fname","lname","email","phone","order","orderno","items","price","name","total","condition","devIndex","findIndex","initializeApp","bind","process","env","PUBLIC_URL","prevProps","prevState","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Firebase from '../node_modules/firebase';\nimport config from './config';\nimport OrderDetails from './orderdetails';\nimport OrderDetailsList from './orderdetailslist';\nimport AddOrder from './addorder';\nimport Home from './home';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    Firebase.initializeApp(config);\n\n    this.state = {\n      users: []\n    }\n    this.addData = this.addData.bind(this);\n    this.updateData = this.updateData.bind(this);\n    this.removeData = this.removeData.bind(this);\n  }\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className='col-xl-12'>\n              <h2>Viswa Order Details</h2>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-xl-12\">\n              <ul className=\"nav nav-tabs\">\n                <li className=\"nav-item\"><Link to=\"/\" className=\"nav-link\">Home</Link></li>\n                <li className=\"nav-item\"><Link to=\"/olist\" className=\"nav-link\">Orders</Link></li>\n                <li className=\"nav-item\"><Link to=\"/od\" className=\"nav-link\">Order Details</Link></li>\n                <li className=\"nav-item\"><Link to=\"/add\" className=\"nav-link\">Add Order</Link></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"row  my-2\">\n            <div className=\"col-xl-12\">\n              <Switch>\n                {/* <Route exact path=\"/\" component={Home} users={this.state.users} update={this.updateData} remove={this.removeData} /> */}\n                <Route exact path=\"/\" render={props => <Home users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route path=\"/olist\" render={props => <OrderDetailsList users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route path=\"/od\" render={props => <OrderDetails users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route path=\"/add\" render={props => <AddOrder users={this.state.users} action={this.addData} />} />\n              </Switch>\n            </div>\n          </div>\n        </div>\n      </Router>\n    )\n  }\n\n  writeUserData = () => {\n    Firebase.database().ref('/').set(this.state);\n    console.log('DATA SAVED');\n  }\n\n  getUserData = () => {\n    let ref = Firebase.database().ref('/');\n    ref.on('value', snapshot => {\n      const state = snapshot.val();\n      this.setState(state);\n    });\n    console.log('DATA RETRIEVED');\n  }\n\n  componentDidMount() {\n    this.getUserData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"prevProps\", prevProps);\n    // check on previous state\n    // only write when it's different with the new state\n    console.log(\"componentDidUpdate\", prevState, this.state);\n    if (prevState !== this.state) {\n      this.writeUserData();\n      console.log(\"componentDidUpdate\");\n    }\n  }\n\n  addData = user => {\n    // console.log(\"Add Data\");\n    if (user) {\n      // console.log(user);\n      const { users } = this.state;\n      users.push(user)\n      this.setState({ users });\n    }\n  }\n\n  removeData = (user) => {\n    if(user){\n      const { users } = this.state;\n      const newState = users.filter(data => {\n        return data.uid !== user.uid;\n      });\n      if(users !== newState){\n        this.setState({ users: newState });\n      }\n      console.log(\"Updated Users state\");\n    }\n  }\n\n  updateData = (user) => {\n    console.log(\"updateData fun in app.js\", user);\n    if(user){\n      console.log(\"if user in app.js\");\n      let fname = user.fname;\n      let lname = user.lname;\n      let email = user.email;\n      let phone = user.phone;\n      let order = user.order;\n      let orderno = user.orderno;\n      let items = user.items;\n      let price = user.price;\n      let name = user.name;\n      let total = user.total;\n      let uid = user.uid;\n      const condition = (fname && lname && name && email && phone && order && orderno && items && price && total);\n      if (uid && condition) {\n        console.log(\"Update condition met\");\n        const { users } = this.state;\n        const devIndex = users.findIndex(user => {\n          return user.uid === uid\n        });\n        console.log(\"devIndex\", devIndex);\n        users[devIndex].fname = fname;\n        users[devIndex].lname = lname;\n        users[devIndex].name = name;\n        users[devIndex].email = email;\n        users[devIndex].phone = phone;\n        users[devIndex].order = order;\n        users[devIndex].orderno = orderno;\n        users[devIndex].items = items;\n        users[devIndex].price = price;\n        users[devIndex].total = total;\n        this.setState({ users: users });\n      }\n    console.log(\"Updateed State in app.js\", this.state.users);\n  }\n}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}