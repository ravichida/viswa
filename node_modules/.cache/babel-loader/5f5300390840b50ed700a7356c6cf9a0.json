{"ast":null,"code":"var _jsxFileName = \"/home/ravi/projects/react/viswa/src/App.js\";\nimport React from \"react\";\nimport { Redirect } from 'react-router';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport Firebase from '../node_modules/firebase';\nimport config from './config';\nimport OrderDetails from './orderdetails';\nimport OrderDetailsList from './orderdetailslist';\nimport AddOrder from './addorder';\nimport Home from './home';\nimport NotFound from './notfound';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.writeUserData = () => {\n      Firebase.database().ref('/').set(this.state);\n      console.log('DATA SAVED');\n    };\n\n    this.getUserData = () => {\n      let ref = Firebase.database().ref('/');\n      ref.on('value', snapshot => {\n        const state = snapshot.val();\n        this.setState(state);\n      });\n      console.log('DATA RETRIEVED');\n    };\n\n    this.addData = user => {\n      // console.log(\"Add Data\");\n      if (user) {\n        // console.log(user);\n        const users = this.state.users;\n        users.push(user);\n        this.setState({\n          users\n        });\n      }\n    };\n\n    this.removeData = user => {\n      if (user) {\n        const users = this.state.users;\n        const newState = users.filter(data => {\n          return data.uid !== user.uid;\n        });\n\n        if (users !== newState) {\n          this.setState({\n            users: newState\n          });\n        }\n\n        console.log(\"Updated Users state\");\n      }\n    };\n\n    this.updateData = user => {\n      console.log(\"updateData fun in app.js\", user);\n\n      if (user) {\n        console.log(\"if user in app.js\");\n        let fname = user.fname;\n        let lname = user.lname;\n        let email = user.email;\n        let phone = user.phone;\n        let order = user.order;\n        let orderno = user.orderno;\n        let items = user.items;\n        let price = user.price;\n        let name = user.name;\n        let total = user.total;\n        let uid = user.uid;\n        const condition = fname && lname && name && email && phone && order && orderno && items && price && total;\n\n        if (uid && condition) {\n          console.log(\"Update condition met\");\n          const users = this.state.users;\n          const devIndex = users.findIndex(user => {\n            return user.uid === uid;\n          });\n          console.log(\"devIndex\", devIndex);\n          users[devIndex].fname = fname;\n          users[devIndex].lname = lname;\n          users[devIndex].name = name;\n          users[devIndex].email = email;\n          users[devIndex].phone = phone;\n          users[devIndex].order = order;\n          users[devIndex].orderno = orderno;\n          users[devIndex].items = items;\n          users[devIndex].price = price;\n          users[devIndex].total = total;\n          this.setState({\n            users: users\n          });\n        }\n\n        console.log(\"Updateed State in app.js\", this.state.users);\n      }\n    };\n\n    Firebase.initializeApp(config);\n    this.state = {\n      users: []\n    };\n    this.addData = this.addData.bind(this);\n    this.updateData = this.updateData.bind(this);\n    this.removeData = this.removeData.bind(this);\n  }\n\n  render() {\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xl-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, \"Viswa Order Details\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xl-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"nav nav-tabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Home\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/olist\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"Orders\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/od\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Order Details\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/add\",\n      className: \"nav-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, \"Add Order\"))))), React.createElement(\"div\", {\n      className: \"row  my-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xl-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => React.createElement(Home, {\n        users: this.state.users,\n        update: this.updateData,\n        remove: this.removeData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/olist\",\n      render: props => React.createElement(OrderDetailsList, {\n        users: this.state.users,\n        update: this.updateData,\n        remove: this.removeData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/od\",\n      render: props => React.createElement(OrderDetails, {\n        users: this.state.users,\n        update: this.updateData,\n        remove: this.removeData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/add\",\n      render: props => React.createElement(AddOrder, {\n        users: this.state.users,\n        action: this.addData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(Route, {\n      render: () => React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }))))));\n  }\n\n  componentDidMount() {\n    this.getUserData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"prevProps\", prevProps); // check on previous state\n    // only write when it's different with the new state\n\n    console.log(\"componentDidUpdate\", prevState, this.state);\n\n    if (prevState !== this.state) {\n      this.writeUserData();\n      console.log(\"componentDidUpdate\");\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ravi/projects/react/viswa/src/App.js"],"names":["React","Redirect","BrowserRouter","Router","Switch","Route","Link","Firebase","config","OrderDetails","OrderDetailsList","AddOrder","Home","NotFound","App","Component","constructor","props","writeUserData","database","ref","set","state","console","log","getUserData","on","snapshot","val","setState","addData","user","users","push","removeData","newState","filter","data","uid","updateData","fname","lname","email","phone","order","orderno","items","price","name","total","condition","devIndex","findIndex","initializeApp","bind","render","componentDidMount","componentDidUpdate","prevProps","prevState"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SACEC,aAAa,IAAIC,MADnB,EAEEC,MAFF,EAGEC,KAHF,EAIEC,IAJF,QAKO,kBALP;AAMA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;;AAEA,MAAMC,GAAN,SAAkBd,KAAK,CAACe,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAgDnBC,aAhDmB,GAgDH,MAAM;AACpBX,MAAAA,QAAQ,CAACY,QAAT,GAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,GAA7B,CAAiC,KAAKC,KAAtC;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACD,KAnDkB;;AAAA,SAqDnBC,WArDmB,GAqDL,MAAM;AAClB,UAAIL,GAAG,GAAGb,QAAQ,CAACY,QAAT,GAAoBC,GAApB,CAAwB,GAAxB,CAAV;AACAA,MAAAA,GAAG,CAACM,EAAJ,CAAO,OAAP,EAAgBC,QAAQ,IAAI;AAC1B,cAAML,KAAK,GAAGK,QAAQ,CAACC,GAAT,EAAd;AACA,aAAKC,QAAL,CAAcP,KAAd;AACD,OAHD;AAIAC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,KA5DkB;;AAAA,SA6EnBM,OA7EmB,GA6ETC,IAAI,IAAI;AAChB;AACA,UAAIA,IAAJ,EAAU;AACR;AADQ,cAEAC,KAFA,GAEU,KAAKV,KAFf,CAEAU,KAFA;AAGRA,QAAAA,KAAK,CAACC,IAAN,CAAWF,IAAX;AACA,aAAKF,QAAL,CAAc;AAAEG,UAAAA;AAAF,SAAd;AACD;AACF,KArFkB;;AAAA,SAuFnBE,UAvFmB,GAuFLH,IAAD,IAAU;AACrB,UAAGA,IAAH,EAAQ;AAAA,cACEC,KADF,GACY,KAAKV,KADjB,CACEU,KADF;AAEN,cAAMG,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAaC,IAAI,IAAI;AACpC,iBAAOA,IAAI,CAACC,GAAL,KAAaP,IAAI,CAACO,GAAzB;AACD,SAFgB,CAAjB;;AAGA,YAAGN,KAAK,KAAKG,QAAb,EAAsB;AACpB,eAAKN,QAAL,CAAc;AAAEG,YAAAA,KAAK,EAAEG;AAAT,WAAd;AACD;;AACDZ,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACD;AACF,KAlGkB;;AAAA,SAoGnBe,UApGmB,GAoGLR,IAAD,IAAU;AACrBR,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCO,IAAxC;;AACA,UAAGA,IAAH,EAAQ;AACNR,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,YAAIgB,KAAK,GAAGT,IAAI,CAACS,KAAjB;AACA,YAAIC,KAAK,GAAGV,IAAI,CAACU,KAAjB;AACA,YAAIC,KAAK,GAAGX,IAAI,CAACW,KAAjB;AACA,YAAIC,KAAK,GAAGZ,IAAI,CAACY,KAAjB;AACA,YAAIC,KAAK,GAAGb,IAAI,CAACa,KAAjB;AACA,YAAIC,OAAO,GAAGd,IAAI,CAACc,OAAnB;AACA,YAAIC,KAAK,GAAGf,IAAI,CAACe,KAAjB;AACA,YAAIC,KAAK,GAAGhB,IAAI,CAACgB,KAAjB;AACA,YAAIC,IAAI,GAAGjB,IAAI,CAACiB,IAAhB;AACA,YAAIC,KAAK,GAAGlB,IAAI,CAACkB,KAAjB;AACA,YAAIX,GAAG,GAAGP,IAAI,CAACO,GAAf;AACA,cAAMY,SAAS,GAAIV,KAAK,IAAIC,KAAT,IAAkBO,IAAlB,IAA0BN,KAA1B,IAAmCC,KAAnC,IAA4CC,KAA5C,IAAqDC,OAArD,IAAgEC,KAAhE,IAAyEC,KAAzE,IAAkFE,KAArG;;AACA,YAAIX,GAAG,IAAIY,SAAX,EAAsB;AACpB3B,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AADoB,gBAEZQ,KAFY,GAEF,KAAKV,KAFH,CAEZU,KAFY;AAGpB,gBAAMmB,QAAQ,GAAGnB,KAAK,CAACoB,SAAN,CAAgBrB,IAAI,IAAI;AACvC,mBAAOA,IAAI,CAACO,GAAL,KAAaA,GAApB;AACD,WAFgB,CAAjB;AAGAf,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB2B,QAAxB;AACAnB,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBX,KAAhB,GAAwBA,KAAxB;AACAR,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBV,KAAhB,GAAwBA,KAAxB;AACAT,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBH,IAAhB,GAAuBA,IAAvB;AACAhB,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBT,KAAhB,GAAwBA,KAAxB;AACAV,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBR,KAAhB,GAAwBA,KAAxB;AACAX,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBP,KAAhB,GAAwBA,KAAxB;AACAZ,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBN,OAAhB,GAA0BA,OAA1B;AACAb,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBL,KAAhB,GAAwBA,KAAxB;AACAd,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBJ,KAAhB,GAAwBA,KAAxB;AACAf,UAAAA,KAAK,CAACmB,QAAD,CAAL,CAAgBF,KAAhB,GAAwBA,KAAxB;AACA,eAAKpB,QAAL,CAAc;AAAEG,YAAAA,KAAK,EAAEA;AAAT,WAAd;AACD;;AACHT,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwC,KAAKF,KAAL,CAAWU,KAAnD;AACD;AACF,KAzIoB;;AAEjBzB,IAAAA,QAAQ,CAAC8C,aAAT,CAAuB7C,MAAvB;AAEA,SAAKc,KAAL,GAAa;AACXU,MAAAA,KAAK,EAAE;AADI,KAAb;AAGA,SAAKF,OAAL,GAAe,KAAKA,OAAL,CAAawB,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKf,UAAL,GAAkB,KAAKA,UAAL,CAAgBe,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKpB,UAAL,GAAkB,KAAKA,UAAL,CAAgBoB,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AACDC,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CADF,CADF,EAME;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAa,MAAA,SAAS,EAAC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAzB,CADF,EAEE;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,QAAT;AAAkB,MAAA,SAAS,EAAC,UAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAzB,CAFF,EAGE;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,KAAT;AAAe,MAAA,SAAS,EAAC,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAzB,CAHF,EAIE;AAAI,MAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,MAAT;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAzB,CAJF,CADF,CADF,CANF,EAgBE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAsB,MAAA,MAAM,EAAEtC,KAAK,IAAI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWU,KAAxB;AAA+B,QAAA,MAAM,EAAE,KAAKO,UAA5C;AAAwD,QAAA,MAAM,EAAE,KAAKL,UAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,QAAlB;AAA2B,MAAA,MAAM,EAAEjB,KAAK,IAAI,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWU,KAApC;AAA2C,QAAA,MAAM,EAAE,KAAKO,UAAxD;AAAoE,QAAA,MAAM,EAAE,KAAKL,UAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAIE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,KAAlB;AAAwB,MAAA,MAAM,EAAEjB,KAAK,IAAI,oBAAC,YAAD;AAAc,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWU,KAAhC;AAAuC,QAAA,MAAM,EAAE,KAAKO,UAApD;AAAgE,QAAA,MAAM,EAAE,KAAKL,UAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAKE,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,MAAlB;AAAyB,MAAA,MAAM,EAAEjB,KAAK,IAAI,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,KAAKK,KAAL,CAAWU,KAA5B;AAAmC,QAAA,MAAM,EAAE,KAAKF,OAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAME,oBAAC,KAAD;AAAO,MAAA,MAAM,EAAE,MAAM,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CADF,CADF,CAhBF,CADF,CADF;AAkCD;;AAgBD0B,EAAAA,iBAAiB,GAAG;AAClB,SAAK/B,WAAL;AACD;;AAEDgC,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACvCpC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBkC,SAAzB,EADuC,CAEvC;AACA;;AACAnC,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCmC,SAAlC,EAA6C,KAAKrC,KAAlD;;AACA,QAAIqC,SAAS,KAAK,KAAKrC,KAAvB,EAA8B;AAC5B,WAAKJ,aAAL;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD;AACF;;AA5E+B;;AA6IlC,eAAeV,GAAf","sourcesContent":["import React from \"react\";\nimport { Redirect } from 'react-router';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Firebase from '../node_modules/firebase';\nimport config from './config';\nimport OrderDetails from './orderdetails';\nimport OrderDetailsList from './orderdetailslist';\nimport AddOrder from './addorder';\nimport Home from './home';\nimport NotFound from './notfound';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    Firebase.initializeApp(config);\n\n    this.state = {\n      users: []\n    }\n    this.addData = this.addData.bind(this);\n    this.updateData = this.updateData.bind(this);\n    this.removeData = this.removeData.bind(this);\n  }\n  render() {\n    return (\n      <Router>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className='col-xl-12'>\n              <h2>Viswa Order Details</h2>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-xl-12\">\n              <ul className=\"nav nav-tabs\">\n                <li className=\"nav-item\"><Link to=\"/\" className=\"nav-link\">Home</Link></li>\n                <li className=\"nav-item\"><Link to=\"/olist\" className=\"nav-link\">Orders</Link></li>\n                <li className=\"nav-item\"><Link to=\"/od\" className=\"nav-link\">Order Details</Link></li>\n                <li className=\"nav-item\"><Link to=\"/add\" className=\"nav-link\">Add Order</Link></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"row  my-2\">\n            <div className=\"col-xl-12\">\n              <Switch>\n                {/* <Route exact path=\"/\" component={Home} users={this.state.users} update={this.updateData} remove={this.removeData} /> */}\n                <Route exact path=\"/\" render={props => <Home users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route exact path=\"/olist\" render={props => <OrderDetailsList users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route exact path=\"/od\" render={props => <OrderDetails users={this.state.users} update={this.updateData} remove={this.removeData} />} />\n                <Route exact path=\"/add\" render={props => <AddOrder users={this.state.users} action={this.addData} />} />\n                <Route render={() => <Redirect to=\"/\" />} />\n                {/* <Route exact path=\"*\" component={NotFound} /> */}\n              </Switch>\n            </div>\n          </div>\n        </div>\n      </Router>\n    )\n  }\n\n  writeUserData = () => {\n    Firebase.database().ref('/').set(this.state);\n    console.log('DATA SAVED');\n  }\n\n  getUserData = () => {\n    let ref = Firebase.database().ref('/');\n    ref.on('value', snapshot => {\n      const state = snapshot.val();\n      this.setState(state);\n    });\n    console.log('DATA RETRIEVED');\n  }\n\n  componentDidMount() {\n    this.getUserData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"prevProps\", prevProps);\n    // check on previous state\n    // only write when it's different with the new state\n    console.log(\"componentDidUpdate\", prevState, this.state);\n    if (prevState !== this.state) {\n      this.writeUserData();\n      console.log(\"componentDidUpdate\");\n    }\n  }\n\n  addData = user => {\n    // console.log(\"Add Data\");\n    if (user) {\n      // console.log(user);\n      const { users } = this.state;\n      users.push(user)\n      this.setState({ users });\n    }\n  }\n\n  removeData = (user) => {\n    if(user){\n      const { users } = this.state;\n      const newState = users.filter(data => {\n        return data.uid !== user.uid;\n      });\n      if(users !== newState){\n        this.setState({ users: newState });\n      }\n      console.log(\"Updated Users state\");\n    }\n  }\n\n  updateData = (user) => {\n    console.log(\"updateData fun in app.js\", user);\n    if(user){\n      console.log(\"if user in app.js\");\n      let fname = user.fname;\n      let lname = user.lname;\n      let email = user.email;\n      let phone = user.phone;\n      let order = user.order;\n      let orderno = user.orderno;\n      let items = user.items;\n      let price = user.price;\n      let name = user.name;\n      let total = user.total;\n      let uid = user.uid;\n      const condition = (fname && lname && name && email && phone && order && orderno && items && price && total);\n      if (uid && condition) {\n        console.log(\"Update condition met\");\n        const { users } = this.state;\n        const devIndex = users.findIndex(user => {\n          return user.uid === uid\n        });\n        console.log(\"devIndex\", devIndex);\n        users[devIndex].fname = fname;\n        users[devIndex].lname = lname;\n        users[devIndex].name = name;\n        users[devIndex].email = email;\n        users[devIndex].phone = phone;\n        users[devIndex].order = order;\n        users[devIndex].orderno = orderno;\n        users[devIndex].items = items;\n        users[devIndex].price = price;\n        users[devIndex].total = total;\n        this.setState({ users: users });\n      }\n    console.log(\"Updateed State in app.js\", this.state.users);\n  }\n}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}